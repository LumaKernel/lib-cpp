---
title: 誤差
---

理論値を $A$, 提出した解を $B$ とする．理論値とは，数学的に求めた厳密値 (を丸めたもの) であったり，「Juryの答え (codeforces)」「ジャッジ解」といった表現だったりする ((多分) 比較対象が真の意味での理論値ではないかもしれない)

絶対誤差とは $$B - A$$ のこと  
相対誤差とは $$\frac{B - A}{|A|}$$ のこと

「絶対誤差または相対誤差が $\epsilon$ 以内 (未満) になるようにしなさい」と書かれたりする

$\epsilon$ は具体的な定数が入る ($10^{-9}$など)

$\epsilon$ が大きいときは乱択が有効かもしれない

上記は「$$\frac{|B-A|} \le \epsilon$$ または &&{\frac{|B-A|}{|A|} \le \epsilon$$ が成り立つようにしなさい」とまず言い換えできる

そして「$$\frac{|B-A|}{\max(1, |A|}} \le \epsilon$$」と言える．たまにこちらがそのまま書かれていたりする

$$|A| \geq 10$$ なら実質的に $\epsilon$ が $10$ 倍になった (制約を守れば良い) と言える

$\epsilon = 10^{-k}$ であるとする

$k$がこれ以上大きいような制約をまもる必要のある状況はうまれ得ない．小数第 $k+1$ 位以降の変動の $$|B-A|$$に対する影響は $10^{-k}$ 未満である (回答は有限である) 

果たして何桁まで出力するのがいいのだろうか．これはジャッジ解が何桁用意されているかによる．仮に$k+1$桁以上の桁数出力したもの (~.○…abc) がACだったとしよう (十進表記でaが$k$桁目)．ジャッジ解は$k$桁より多く用意されている時 (~.○…(a-1)bc) ~ (~.○…(a+1)bc) となる．また，k桁にまるめて出力すると， (~.○…a) か (~.○…(a+1) となる．この時，誤差が $\epsilon$ に収まらないケースがある．ジャッジ解が$k$桁のときは，(~.○…a) ~ (~.○…(a+1)) なので丸めても大丈夫である ($k$桁で十分)

多く出力することに越したことは無いだろうが，本質的な改善になるかは定かではない

---

$10^{-k}$ の倍数だけを確かめれば十分なことから，解を $P/Q$の有理数の形で表し，$Q=10^k$と固定して，$P$を二分探索するというテクがある．これを使えば，決め打ちした値は有理数になり，式変形で整数だけの問題に帰着できるかもしれない (整数だけの問題になると嬉しい場合がある)

# 練習問題

* [K - 光と闇の調和 (KUPC2018) - AtCoder](https://beta.atcoder.jp/contests/kupc2018/tasks/kupc2018_k){:target="_blank"}<!--_-->

